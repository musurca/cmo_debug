--[[
----------------------------------------------
CMO DEBUG v1.0 by Nicholas Musurca (nick.musurca@gmail.com)
Licensed under GNU GPLv3. (https://www.gnu.org/licenses/gpl-3.0-standalone.html)

MAKE SURE YOU READ THE INCLUDED MANUAL BEFORE DOING ANYTHING WITH THIS CODE!
----------------------------------------------
]]--

function ForEachDo(table,a)for b=1,#table do a(table[b])end end;function ForEachDo_Break(table,a)for b=1,#table do if not a(table[b])then return end end end;function RStrip(c)c=string.gsub(c,"^%s*","")return string.gsub(c,"%s*$","")end;function Input_OK(d)ScenEdit_MsgBox(d,0)end;function Input_YesNo(d)local e={['Yes']=true,['No']=false}while true do local f=ScenEdit_MsgBox(d,4)if f~='Cancel'then return e[f]end end;return false end;function Input_Number(d)while true do local g=ScenEdit_InputBox(d)if g then g=tonumber(g)if g then return g end else return nil end end end;function Input_String(d)local g=ScenEdit_InputBox(d)if g then return tostring(g)end;return""end;function Util_DumpFields(h)for i,j in pairs(h.fields)do if string.find(i,'property_')~=nil then local k=string.find(j," , ")print("\r\n[object] = "..string.sub(j,2,k-1))print(h[string.sub(j,2,k-1)])end end end;function Geo_ParseLatLon(c)local l="[N|S]"local m="[E|W]"local n={["N"]=1,["S"]=-1,["E"]=1,["W"]=-1}c=string.upper(c)local o="([+-]?%d+[.]?%d*)"local p={}string.gsub(c,o,function(q)table.insert(p,tonumber(q))end)local r,s=1,1;string.gsub(c,l,function(t)r=n[t]end)string.gsub(c,m,function(t)s=n[t]end)if#p==2 then latitude,longitude=p[1],p[2]elseif#p==4 then latitude=math.floor(p[1])+p[2]/60;longitude=math.floor(p[3])+p[4]/60 elseif#p==6 then latitude=math.floor(p[1])+math.floor(p[2])/60+p[3]/3600;longitude=math.floor(p[4])+math.floor(p[5])/60+p[6]/3600 else return nil,nil end;return latitude*r,longitude*s end;FUELTYPE_NONE=1001;FUELTYPE_AVIATION=2001;FUELTYPE_DIESEL=3001;FUELTYPE_OIL=3002;FUELTYPE_GAS=3003;FUELTYPE_BATTERY=4001;FUELTYPE_AIRINDEP=4002;FUELTYPE_ROCKET=5001;FUELTYPE_TORPEDO=5002;FUELTYPE_COAST=5003;FUELTYPES={["NONE"]=FUELTYPE_NONE,["AVIATION"]=FUELTYPE_AVIATION,["DIESEL"]=FUELTYPE_DIESEL,["OIL"]=FUELTYPE_OIL,["GAS"]=FUELTYPE_GAS,["BATTERY"]=FUELTYPE_BATTERY,["AIRINDEP"]=FUELTYPE_AIRINDEP,["ROCKET"]=FUELTYPE_ROCKET,["TORPEDO"]=FUELTYPE_TORPEDO,["COAST"]=FUELTYPE_COAST}function Unit_GetFuelPercent(u,v)local w=u.fuel[v]return w.current/w.max end;function Unit_SetFuelPercent(u,v,pct)local x=u.fuel;x[v].current=pct*x[v].max;u.fuel=x end;function Unit_GetFuelCapacity(u,v)return u.fuel[v].max end;function Unit_GetFuelAmount(u,v)return u.fuel[v].current end;function Unit_SetFuelAmount(u,v,y)local x=u.fuel;x[v].current=y;u.fuel=x end;function Unit_OrderUNREP(u,z)z=z or nil;local A={guid=u.guid}if z~=nil then A.tanker=z.guid end;ScenEdit_RefuelUnit(A)end;function Unit_SetComms(u,B)ScenEdit_SetUnit({guid=u.guid,OUTOFCOMMS=B})end;function Unit_InComms(u)return u.outOfComms end;function Side_GetSide(C)local D=VP_GetSides()for b=1,#D do local E=D[b]if E.name==C then return E end end;return nil end;function Side_GetNoNavZones(E)local F={}if E==nil then return F end;local G=E.nonavzones;ForEachDo(G,function(H)local I=E:getnonavzone(H.guid)table.insert(F,I)end)return F end;function GetReferencePoints(C,J)return ScenEdit_GetReferencePoints({side=C,area=J})end;function DeleteReferencePoints(C,K)for b=1,#K do ScenEdit_DeleteReferencePoint({side=C,guid=K[b].guid})end end;function GetSelectedUnits()local L={}local M=ScenEdit_SelectedUnits().units;for b=1,#M do local u=ScenEdit_GetUnit({guid=M[b].guid})table.insert(L,u)end;return L end;function PrintSelectedGUIDS()local N={}local M=GetSelectedUnits()ForEachDo(M,function(u)table.insert(N,u.guid)end)print("--[[ group containing:")ForEachDo(M,function(u)print("\t"..u.name)end)print("]]--")local O="local grp = {\r\n"for i,j in ipairs(N)do O=O.."\t\""..j.."\""if i<#N then O=O..",\r\n"end end;O=O.."\r\n}"print(O)end;function Event_Exists(P)local Q=ScenEdit_GetEvents()for b=1,#Q do local R=Q[b]if R.details.description==P then return true end end;return false end;function Event_Delete(P,S)S=S or false;if S then ForEachDo_Break(ScenEdit_GetEvents(),function(R)if R.details.description==P then ForEachDo(R.details.triggers,function(T)for U,g in pairs(T)do if g.Description~=nil then Event_RemoveTrigger(P,g.Description)Trigger_Delete(g.Description)end end end)ForEachDo(R.details.conditions,function(T)for U,g in pairs(T)do if g.Description~=nil then Event_RemoveCondition(P,g.Description)Condition_Delete(g.Description)end end end)ForEachDo(R.details.actions,function(T)for U,g in pairs(T)do if g.Description~=nil then Event_RemoveAction(P,g.Description)Action_Delete(g.Description)end end end)return false end;return true end)end;ScenEdit_SetEvent(P,{mode="remove"})end;function Event_Create(P,A)ForEachDo(ScenEdit_GetEvents(),function(R)if R.details.description==P then ScenEdit_SetEvent(P,{mode="remove"})end end)A.mode="add"ScenEdit_SetEvent(P,A)return P end;function Event_AddTrigger(V,W)ScenEdit_SetEventTrigger(V,{mode='add',name=W})end;function Event_RemoveTrigger(V,W)ScenEdit_SetEventTrigger(V,{mode='remove',name=W})end;function Event_AddCondition(V,X)ScenEdit_SetEventCondition(V,{mode='add',name=X})end;function Event_RemoveCondition(V,X)ScenEdit_SetEventCondition(V,{mode='remove',name=X})end;function Event_AddAction(V,Y)ScenEdit_SetEventAction(V,{mode='add',name=Y})end;function Event_RemoveAction(V,Y)ScenEdit_SetEventAction(V,{mode='remove',name=Y})end;function Trigger_Create(Z,A)A.name=Z;A.mode="add"ScenEdit_SetTrigger(A)return Z end;function Trigger_Delete(Z)ScenEdit_SetTrigger({name=Z,mode="remove"})end;function Condition_Create(_,A)A.name=_;A.mode="add"ScenEdit_SetCondition(A)return _ end;function Condition_Delete(_)ScenEdit_SetCondition({name=_,mode="remove"})end;function Action_Create(a0,A)A.name=a0;A.mode="add"ScenEdit_SetAction(A)return a0 end;function Action_Delete(a0)ScenEdit_SetAction({name=a0,mode="remove"})end;local a1={{script="Debug_SetHeading()",name="Set heading for selected units",desc="Set the orientation of the selected units from 0-360 degrees."},{script="Debug_SetSpeed()",name="Set speed for selected units",desc="Set the speed in knots of the selected units."},{script="Debug_MarkLatLon()",name="Mark coordinate by latitude/longitude",desc="Mark a geographic coordinate with a reference point. Supports various coordinate formats including Decimal Degree, Degree Minutes, and Degrees Minutes Seconds."},{script="Debug_MarkLatLon(true)",name="Label coordinate by latitude/longitude",desc="Add a custom label to a geographic coordinate with a reference point. Supports various coordinate formats including Decimal Degree, Degree Minutes, and Degrees Minutes Seconds."},{script="Debug_DisableAISelected()",name="Disable AI for selected units",desc="Sets .AI_EvaluateTargets_enabled and .AI_DeterminePrimaryTarget_enabled to false for all selected units to improve performance."},{script="Debug_SetFuelPercentSelected()",name="Set fuel percentage for selected units",desc="Sets fuel carried by the selected units to a percentage of the maximum fuel capacity."},{script="Debug_RemoveDebugFramework()",name="[REMOVE DEBUG FRAMEWORK]",desc="Remove the DEBUG framework. Do this prior to releasing the scenario."}}function Debug_DisableAISelected()local a2=GetSelectedUnits()ForEachDo(a2,function(u)u.AI_EvaluateTargets_enabled=false;u.AI_DeterminePrimaryTarget_enabled=false end)Input_OK("AI disabled for "..#a2 .." unit(s).")end;function Debug_MarkLatLon(a3)a3=a3 or false;local a4="Enter latitude and longitude:\n\n(valid formats include Decimal Degrees, Degrees Minutes, and Degrees Minutes Seconds)"local g=RStrip(Input_String(a4))if g==""then return end;local a5,a6=Geo_ParseLatLon(g)if a5~=nil and a6~=nil then local a7=g;a4=" added at\n("..a5 ..", "..a6 ..")"if a3 then a7=RStrip(Input_String("Label the point at\n("..a5 ..", "..a6 .."):"))if a7==""then a7=g;a4="New reference point"..a4 else a4=a7 ..a4 end else a4="New reference point"..a4 end;local a8=ScenEdit_GetSideOptions({side="playerside"})local C=a8.side;ScenEdit_AddReferencePoint({side=C,name=a7,lat=a5,lon=a6,highlighted=true})Input_OK(a4)else Input_OK("Couldn't parse a valid latitude/longitude from\n"..g)end end;function Debug_SetFuelPercentSelected()local a9=GetSelectedUnits()if#a9==0 then Input_OK("You must select at least 1 unit!")return end;local a4="Which type of fuel to set?\n\nValid types include Aviation, Diesel, Oil, Gas, Battery, AirIndep, Rocket, Torpedo, and Coast."local g=Input_String(a4)fuel=string.upper(RStrip(g))fuel_num=FUELTYPES[fuel]if fuel_num==nil then Input_OK("Didn't recognize "..g.." as a valid fuel!")return end;local aa=Input_Number("Set percentage of maximum fuel capacity (0-100):")aa=math.max(0,math.min(aa,100))pct=aa/100;ForEachDo(a9,function(u)Unit_SetFuelPercent(u,fuel_num,pct)end)Input_OK(fuel.." fuel set to "..aa.."% for "..#a9 .." unit(s).")end;function Debug_SetHeading()local a9=GetSelectedUnits()if#a9==0 then Input_OK("You must select at least 1 unit!")return end;local ab=Input_Number("Set heading for selected units (0-360):")ab=math.max(0,math.min(360,ab))ForEachDo(a9,function(u)ScenEdit_SetUnit({guid=u.guid,heading=ab})end)Input_OK("Heading set to "..ab.."° for "..#a9 .." unit(s).")end;function Debug_SetSpeed()local a9=GetSelectedUnits()if#a9==0 then Input_OK("You must select at least 1 unit!")return end;local ac=Input_Number("Set speed in knots for selected units:")ac=math.max(0,ac)ForEachDo(a9,function(u)ScenEdit_SetUnit({guid=u.guid,speed=ac})end)Input_OK("Speed set to "..ac.."kts for "..#a9 .." unit(s).")end;function Debug_RemoveDebugFramework()if Input_YesNo("This will remove the DEBUG framework. Are you sure?")then RemoveDebugActions()if Event_Exists("DEBUG: Scenario Loaded")then Event_Delete("DEBUG: Scenario Loaded",true)end;Input_OK("DEBUG framework removed.")end end;function RemoveDebugActions()local ad=ScenEdit_GetSpecialAction({ActionNameOrID="",Mode="list"})ForEachDo(ad,function(ae)if string.find(ae.name,"^DEBUG:")then ScenEdit_SetSpecialAction({ActionNameOrID=ae.guid,Mode="remove"})end end)end;function AddDebugActions()RemoveDebugActions()ForEachDo(VP_GetSides(),function(E)ForEachDo(a1,function(Y)ScenEdit_AddSpecialAction({ActionNameOrID="DEBUG: "..Y.name,Description=Y.desc,Side=E.name,IsActive=true,IsRepeatable=true,ScriptText=Y.script})end)end)end;function Debug_Init()if Event_Exists("DEBUG: Scenario Loaded")then Event_Delete("DEBUG: Scenario Loaded",true)end;local af=Event_Create("DEBUG: Scenario Loaded",{IsRepeatable=true,IsShown=false})local ag=Trigger_Create("DEBUG_Scenario_Loaded",{type="ScenLoaded"})local ah=Action_Create("DEBUG: Turn Starts",{type='LuaScript',ScriptText=DEBUG_LOADER})Event_AddTrigger(af,ag)Event_AddAction(af,ah)AddDebugActions()Input_OK("Success! The DEBUG framework has been added!\n\n(NOTE: If you add any more sides, you should save and reload the scenario to update the special actions menu.)")end;DEBUG_LOADER="function ForEachDo(table,a)for b=1,#table do a(table[b])end end;function ForEachDo_Break(table,a)for b=1,#table do if not a(table[b])then return end end end;function RStrip(c)c=string.gsub(c,\"^%s*\",\"\")return string.gsub(c,\"%s*$\",\"\")end;function Input_OK(d)ScenEdit_MsgBox(d,0)end;function Input_YesNo(d)local e={['Yes']=true,['No']=false}while true do local f=ScenEdit_MsgBox(d,4)if f~='Cancel'then return e[f]end end;return false end;function Input_Number(d)while true do local g=ScenEdit_InputBox(d)if g then g=tonumber(g)if g then return g end else return nil end end end;function Input_String(d)local g=ScenEdit_InputBox(d)if g then return tostring(g)end;return\"\"end;function Util_DumpFields(h)for i,j in pairs(h.fields)do if string.find(i,'property_')~=nil then local k=string.find(j,\" , \")print(\"\\r\\n[object] = \"..string.sub(j,2,k-1))print(h[string.sub(j,2,k-1)])end end end;function Geo_ParseLatLon(c)local l=\"[N|S]\"local m=\"[E|W]\"local n={[\"N\"]=1,[\"S\"]=-1,[\"E\"]=1,[\"W\"]=-1}c=string.upper(c)local o=\"([+-]?%d+[.]?%d*)\"local p={}string.gsub(c,o,function(q)table.insert(p,tonumber(q))end)local r,s=1,1;string.gsub(c,l,function(t)r=n[t]end)string.gsub(c,m,function(t)s=n[t]end)if#p==2 then latitude,longitude=p[1],p[2]elseif#p==4 then latitude=math.floor(p[1])+p[2]/60;longitude=math.floor(p[3])+p[4]/60 elseif#p==6 then latitude=math.floor(p[1])+math.floor(p[2])/60+p[3]/3600;longitude=math.floor(p[4])+math.floor(p[5])/60+p[6]/3600 else return nil,nil end;return latitude*r,longitude*s end;FUELTYPE_NONE=1001;FUELTYPE_AVIATION=2001;FUELTYPE_DIESEL=3001;FUELTYPE_OIL=3002;FUELTYPE_GAS=3003;FUELTYPE_BATTERY=4001;FUELTYPE_AIRINDEP=4002;FUELTYPE_ROCKET=5001;FUELTYPE_TORPEDO=5002;FUELTYPE_COAST=5003;FUELTYPES={[\"NONE\"]=FUELTYPE_NONE,[\"AVIATION\"]=FUELTYPE_AVIATION,[\"DIESEL\"]=FUELTYPE_DIESEL,[\"OIL\"]=FUELTYPE_OIL,[\"GAS\"]=FUELTYPE_GAS,[\"BATTERY\"]=FUELTYPE_BATTERY,[\"AIRINDEP\"]=FUELTYPE_AIRINDEP,[\"ROCKET\"]=FUELTYPE_ROCKET,[\"TORPEDO\"]=FUELTYPE_TORPEDO,[\"COAST\"]=FUELTYPE_COAST}function Unit_GetFuelPercent(u,v)local w=u.fuel[v]return w.current/w.max end;function Unit_SetFuelPercent(u,v,pct)local x=u.fuel;x[v].current=pct*x[v].max;u.fuel=x end;function Unit_GetFuelCapacity(u,v)return u.fuel[v].max end;function Unit_GetFuelAmount(u,v)return u.fuel[v].current end;function Unit_SetFuelAmount(u,v,y)local x=u.fuel;x[v].current=y;u.fuel=x end;function Unit_OrderUNREP(u,z)z=z or nil;local A={guid=u.guid}if z~=nil then A.tanker=z.guid end;ScenEdit_RefuelUnit(A)end;function Unit_SetComms(u,B)ScenEdit_SetUnit({guid=u.guid,OUTOFCOMMS=B})end;function Unit_InComms(u)return u.outOfComms end;function Side_GetSide(C)local D=VP_GetSides()for b=1,#D do local E=D[b]if E.name==C then return E end end;return nil end;function Side_GetNoNavZones(E)local F={}if E==nil then return F end;local G=E.nonavzones;ForEachDo(G,function(H)local I=E:getnonavzone(H.guid)table.insert(F,I)end)return F end;function GetReferencePoints(C,J)return ScenEdit_GetReferencePoints({side=C,area=J})end;function DeleteReferencePoints(C,K)for b=1,#K do ScenEdit_DeleteReferencePoint({side=C,guid=K[b].guid})end end;function GetSelectedUnits()local L={}local M=ScenEdit_SelectedUnits().units;for b=1,#M do local u=ScenEdit_GetUnit({guid=M[b].guid})table.insert(L,u)end;return L end;function PrintSelectedGUIDS()local N={}local M=GetSelectedUnits()ForEachDo(M,function(u)table.insert(N,u.guid)end)print(\"--[[ group containing:\")ForEachDo(M,function(u)print(\"\\t\"..u.name)end)print(\"]]--\")local O=\"local grp = {\\r\\n\"for i,j in ipairs(N)do O=O..\"\\t\\\"\"..j..\"\\\"\"if i<#N then O=O..\",\\r\\n\"end end;O=O..\"\\r\\n}\"print(O)end;function Event_Exists(P)local Q=ScenEdit_GetEvents()for b=1,#Q do local R=Q[b]if R.details.description==P then return true end end;return false end;function Event_Delete(P,S)S=S or false;if S then ForEachDo_Break(ScenEdit_GetEvents(),function(R)if R.details.description==P then ForEachDo(R.details.triggers,function(T)for U,g in pairs(T)do if g.Description~=nil then Event_RemoveTrigger(P,g.Description)Trigger_Delete(g.Description)end end end)ForEachDo(R.details.conditions,function(T)for U,g in pairs(T)do if g.Description~=nil then Event_RemoveCondition(P,g.Description)Condition_Delete(g.Description)end end end)ForEachDo(R.details.actions,function(T)for U,g in pairs(T)do if g.Description~=nil then Event_RemoveAction(P,g.Description)Action_Delete(g.Description)end end end)return false end;return true end)end;ScenEdit_SetEvent(P,{mode=\"remove\"})end;function Event_Create(P,A)ForEachDo(ScenEdit_GetEvents(),function(R)if R.details.description==P then ScenEdit_SetEvent(P,{mode=\"remove\"})end end)A.mode=\"add\"ScenEdit_SetEvent(P,A)return P end;function Event_AddTrigger(V,W)ScenEdit_SetEventTrigger(V,{mode='add',name=W})end;function Event_RemoveTrigger(V,W)ScenEdit_SetEventTrigger(V,{mode='remove',name=W})end;function Event_AddCondition(V,X)ScenEdit_SetEventCondition(V,{mode='add',name=X})end;function Event_RemoveCondition(V,X)ScenEdit_SetEventCondition(V,{mode='remove',name=X})end;function Event_AddAction(V,Y)ScenEdit_SetEventAction(V,{mode='add',name=Y})end;function Event_RemoveAction(V,Y)ScenEdit_SetEventAction(V,{mode='remove',name=Y})end;function Trigger_Create(Z,A)A.name=Z;A.mode=\"add\"ScenEdit_SetTrigger(A)return Z end;function Trigger_Delete(Z)ScenEdit_SetTrigger({name=Z,mode=\"remove\"})end;function Condition_Create(_,A)A.name=_;A.mode=\"add\"ScenEdit_SetCondition(A)return _ end;function Condition_Delete(_)ScenEdit_SetCondition({name=_,mode=\"remove\"})end;function Action_Create(a0,A)A.name=a0;A.mode=\"add\"ScenEdit_SetAction(A)return a0 end;function Action_Delete(a0)ScenEdit_SetAction({name=a0,mode=\"remove\"})end;local a1={{script=\"Debug_SetHeading()\",name=\"Set heading for selected units\",desc=\"Set the orientation of the selected units from 0-360 degrees.\"},{script=\"Debug_SetSpeed()\",name=\"Set speed for selected units\",desc=\"Set the speed in knots of the selected units.\"},{script=\"Debug_MarkLatLon()\",name=\"Mark coordinate by latitude/longitude\",desc=\"Mark a geographic coordinate with a reference point. Supports various coordinate formats including Decimal Degree, Degree Minutes, and Degrees Minutes Seconds.\"},{script=\"Debug_MarkLatLon(true)\",name=\"Label coordinate by latitude/longitude\",desc=\"Add a custom label to a geographic coordinate with a reference point. Supports various coordinate formats including Decimal Degree, Degree Minutes, and Degrees Minutes Seconds.\"},{script=\"Debug_DisableAISelected()\",name=\"Disable AI for selected units\",desc=\"Sets .AI_EvaluateTargets_enabled and .AI_DeterminePrimaryTarget_enabled to false for all selected units to improve performance.\"},{script=\"Debug_SetFuelPercentSelected()\",name=\"Set fuel percentage for selected units\",desc=\"Sets fuel carried by the selected units to a percentage of the maximum fuel capacity.\"},{script=\"Debug_RemoveDebugFramework()\",name=\"[REMOVE DEBUG FRAMEWORK]\",desc=\"Remove the DEBUG framework. Do this prior to releasing the scenario.\"}}function Debug_DisableAISelected()local a2=GetSelectedUnits()ForEachDo(a2,function(u)u.AI_EvaluateTargets_enabled=false;u.AI_DeterminePrimaryTarget_enabled=false end)Input_OK(\"AI disabled for \"..#a2 ..\" unit(s).\")end;function Debug_MarkLatLon(a3)a3=a3 or false;local a4=\"Enter latitude and longitude:\\n\\n(valid formats include Decimal Degrees, Degrees Minutes, and Degrees Minutes Seconds)\"local g=RStrip(Input_String(a4))if g==\"\"then return end;local a5,a6=Geo_ParseLatLon(g)if a5~=nil and a6~=nil then local a7=g;a4=\" added at\\n(\"..a5 ..\", \"..a6 ..\")\"if a3 then a7=RStrip(Input_String(\"Label the point at\\n(\"..a5 ..\", \"..a6 ..\"):\"))if a7==\"\"then a7=g;a4=\"New reference point\"..a4 else a4=a7 ..a4 end else a4=\"New reference point\"..a4 end;local a8=ScenEdit_GetSideOptions({side=\"playerside\"})local C=a8.side;ScenEdit_AddReferencePoint({side=C,name=a7,lat=a5,lon=a6,highlighted=true})Input_OK(a4)else Input_OK(\"Couldn't parse a valid latitude/longitude from\\n\"..g)end end;function Debug_SetFuelPercentSelected()local a9=GetSelectedUnits()if#a9==0 then Input_OK(\"You must select at least 1 unit!\")return end;local a4=\"Which type of fuel to set?\\n\\nValid types include Aviation, Diesel, Oil, Gas, Battery, AirIndep, Rocket, Torpedo, and Coast.\"local g=Input_String(a4)fuel=string.upper(RStrip(g))fuel_num=FUELTYPES[fuel]if fuel_num==nil then Input_OK(\"Didn't recognize \"..g..\" as a valid fuel!\")return end;local aa=Input_Number(\"Set percentage of maximum fuel capacity (0-100):\")aa=math.max(0,math.min(aa,100))pct=aa/100;ForEachDo(a9,function(u)Unit_SetFuelPercent(u,fuel_num,pct)end)Input_OK(fuel..\" fuel set to \"..aa..\"% for \"..#a9 ..\" unit(s).\")end;function Debug_SetHeading()local a9=GetSelectedUnits()if#a9==0 then Input_OK(\"You must select at least 1 unit!\")return end;local ab=Input_Number(\"Set heading for selected units (0-360):\")ab=math.max(0,math.min(360,ab))ForEachDo(a9,function(u)ScenEdit_SetUnit({guid=u.guid,heading=ab})end)Input_OK(\"Heading set to \"..ab..\"° for \"..#a9 ..\" unit(s).\")end;function Debug_SetSpeed()local a9=GetSelectedUnits()if#a9==0 then Input_OK(\"You must select at least 1 unit!\")return end;local ac=Input_Number(\"Set speed in knots for selected units:\")ac=math.max(0,ac)ForEachDo(a9,function(u)ScenEdit_SetUnit({guid=u.guid,speed=ac})end)Input_OK(\"Speed set to \"..ac..\"kts for \"..#a9 ..\" unit(s).\")end;function Debug_RemoveDebugFramework()if Input_YesNo(\"This will remove the DEBUG framework. Are you sure?\")then RemoveDebugActions()if Event_Exists(\"DEBUG: Scenario Loaded\")then Event_Delete(\"DEBUG: Scenario Loaded\",true)end;Input_OK(\"DEBUG framework removed.\")end end;function RemoveDebugActions()local ad=ScenEdit_GetSpecialAction({ActionNameOrID=\"\",Mode=\"list\"})ForEachDo(ad,function(ae)if string.find(ae.name,\"^DEBUG:\")then ScenEdit_SetSpecialAction({ActionNameOrID=ae.guid,Mode=\"remove\"})end end)end;function AddDebugActions()RemoveDebugActions()ForEachDo(VP_GetSides(),function(E)ForEachDo(a1,function(Y)ScenEdit_AddSpecialAction({ActionNameOrID=\"DEBUG: \"..Y.name,Description=Y.desc,Side=E.name,IsActive=true,IsRepeatable=true,ScriptText=Y.script})end)end)end;AddDebugActions()"Debug_Init()
